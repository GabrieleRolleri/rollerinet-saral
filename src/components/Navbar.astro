---
import NavbarLink from './NavbarLink.astro'
import { Icon } from 'astro-icon/components'
import ThemeSelector from './ThemeSelector.astro'
import { SITE_BASE, WebsiteLinks } from '../consts'
import LogoSVG from '../assets/logo.svg'
---

<header class="fixed top-0 w-full z-40 bg-background dark:bg-background-dark">
	<nav class="">
		<div class="app-container flex justify-between items-center py-5">
			<a href={`${SITE_BASE}/`} aria-label="Home">
				<LogoSVG height={36} width={36} />
			</a>
			<div class="gap-8 hidden md:flex items-center">
				{
					WebsiteLinks.map((link) => (
						<NavbarLink
							class="text-lg"
							href={`${SITE_BASE}/${link.url}`}
							target={link.url.charAt(0) === 'h' ? '_blank' : '_self'}
						>
							{link.name}
						</NavbarLink>
					))
				}

                <a
                    href="/Gabriele_Rolleri_CV.pdf"
                    target="_blank"
                    class="flex items-center gap-2 border-[1px] border-foreground dark:border-foreground-dark rounded-full px-4 py-1 text-foreground dark:text-foreground-dark md:opacity-80 hover:opacity-100 hover:bg-foreground/5 dark:hover:bg-foreground-dark/5 transition-all"
                >
                    <span class="text-sm font-medium">CV</span>
                    <Icon name="mdi:download" size={16} />
                </a>

				<ThemeSelector />
			</div>
			<button
				class="md:hidden cursor-pointer"
				id="nav-open-btn"
				aria-label="Open navigation menu"
				title="Open navigation menu"
			>
				<Icon aria-hidden name="mdi:menu" size={32} />
			</button>

			<div
				class="translate-x-full md:hidden fixed top-0 right-0 bg-background dark:bg-background-dark h-screen w-5/6 px-8 py-6 transition-transform z-40 border-l-[1px] border-background"
				id="mobile-menu"
			>
				<button
					id="nav-close-btn"
					class="ml-auto block cursor-pointer"
					aria-label="Close navigation menu"
					title="Close navigation menu"
				>
					<Icon aria-hidden name="mdi:close" size={32} />
				</button>
				<div class="flex flex-col h-full items-start gap-8 pt-16">
					{
						WebsiteLinks.map((link) => (
							<NavbarLink
								class="text-4xl font-light"
								href={`${SITE_BASE}/${link.url}`}
							>
								{link.name}
							</NavbarLink>
						))
					}

                    <a
                        href="/Gabriele_Rolleri_CV.pdf"
                        target="_blank"
                        class="flex items-center gap-2 text-4xl font-light hover:text-primary dark:hover:text-primary-dark transition-colors"
                    >
                        <span>CV</span>
                        <Icon name="mdi:download" size={32} />
                    </a>

					<ThemeSelector class:list="mt-4" />
				</div>
			</div>
		</div>
	</nav>

	<script>
		function toggleNav() {
			document
				.querySelector('#mobile-menu')
				?.classList.toggle('mobile-nav-open')
		}

		document
			.querySelector('#nav-open-btn')
			?.addEventListener('click', toggleNav)
		document
			.querySelector('#nav-close-btn')
			?.addEventListener('click', toggleNav)
	</script>
</header>